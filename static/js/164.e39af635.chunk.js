(this["webpackJsonpmap-sample"]=this["webpackJsonpmap-sample"]||[]).push([[164],{775:function(e,t,a){"use strict";a.r(t),a.d(t,"getPatternDescriptor",(function(){return S})),a.d(t,"getSymbolLayerFill",(function(){return z})),a.d(t,"previewSymbol3D",(function(){return q}));var r=a(7),s=a.n(r),l=a(14),n=a(17),i=(a(11),a(8)),c=a(10),o=a(19),u=a(22),h=a(33),p=a(352),b=a(55),m=a(353),f=a(502),v=a(304),y=a(350),d=a(179),j=a(694),O=a(719),k=22,g=120,x=c.a.getLogger("esri.symbols.support.previewSymbol3D");function w(e){var t=e.outline,a=Object(i.i)(e.material)?e.material.color:null,r=Object(i.i)(a)?a.toHex():null;if(Object(i.h)(t))return"fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;var s=Object(h.d)(t.size)||0;return{color:"rgba("+(Object(i.i)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(s,80)}}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.a,r=Object(f.a)(e),s=r.h,l=r.s/t,n=100-(100-r.v)/t,i=Object(f.d)({h:s,s:l,v:n}),c=i.r,o=i.g,u=i.b;return[c,o,u,a]}function L(e){return"water"===e.type?Object(i.h)(e.color)?null:e.color:Object(i.h)(e.material)||Object(i.h)(e.material.color)?null:e.material.color}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=L(e);if(!a){if("fill"===e.type)return null;var r=y.a.r,s=Object(j.b)(r,t);return[s,s,s,100]}for(var l=a.toRgba(),n=0;n<3;n++)l[n]=Object(j.b)(l[n],t);return l}function S(e,t){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(r=t.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Object(y.c)(Object(b.a)("esri/symbols/patterns/".concat(r,".png")),a.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return e.outline?w(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function I(e,t){var a=L(e);if(!a)return null;var r="rgba(";return r+=Object(j.b)(a.r,t)+",",r+=Object(j.b)(a.g,t)+",",(r+=Object(j.b)(a.b,t)+",")+a.a+");"}function C(e,t){var a=I(e,t);return a?{color:a,width:Math.min(e.size?Object(h.d)(e.size):.75,80)}:{}}function E(e,t,a){var r=.75*a;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function R(e,t){var a,r=t&&t.size?Object(h.d)(t.size):null,s=t&&t.maxSize?Object(h.d)(t.maxSize):null,l=t&&t.disableUpsampling,n=e.symbolLayers,i=[],c=0,o=0,f=n.getItemAt(n.length-1);return f&&"icon"===f.type&&(a=f.size&&Object(h.d)(f.size)),n.forEach((function(n){if("icon"===n.type||"object"===n.type){var u="icon"===n.type?n.size&&Object(h.d)(n.size):0,f=r||u?Math.ceil(Math.min(r||u,s||g)):k;if(n&&n.resource&&n.resource.href){var y=function(e,t){var a=t&&t.resource,r=a&&a.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&"object"!==t.type)return Promise.resolve(Object(d.f)(e,t));var s=Object(b.a)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?Object(v.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||s})):Promise.resolve(s)}(e,n).then((function(e){var t=n.get("material.color"),a=function(e){return"icon"===e.type?"multiply":"tint"}(n);return Object(O.b)(e,f,t,a,l)})).then((function(e){var t=e.width,a=e.height;return c=Math.max(c,t),o=Math.max(o,a),[{shape:{type:"image",x:0,y:0,width:t,height:a,src:e.url},fill:null,stroke:null}]}));i.push(y)}else{var x,M=f;"icon"===n.type&&a&&r&&(M=f*(u/a));var L="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(x=t.symbolConfig)?void 0:x.isTall)||"object"===n.type&&function(e){var t=e.depth,a=e.height,r=e.width;return r&&t&&a&&r===t&&r<a}(n);c=Math.max(c,L?20:M),o=Math.max(o,M),i.push(Promise.resolve(function(e,t,a){var r=[];if(!e)return r;switch(e.type){case"icon":var s=t,l=t;switch(e.resource&&e.resource.primitive||p.b){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:z(e,0),stroke:w(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[0,0]},{command:"L",values:[s,0]},{command:"L",values:[s,l]},{command:"Z",values:[]}]},fill:z(e,0),stroke:w(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,l]},{command:"Z",values:[]}]},fill:z(e,0),stroke:w(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*s,0]},{command:"L",values:[.5*s,l]},{command:"M",values:[0,.5*l]},{command:"L",values:[s,.5*l]}]},stroke:D(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[s,l]},{command:"M",values:[s,0]},{command:"L",values:[0,l]}]},stroke:D(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*l]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,.5*l]},{command:"L",values:[.5*s,l]},{command:"Z",values:[]}]},fill:z(e,0),stroke:w(e)})}break;case"object":switch(e.resource&&e.resource.primitive||m.b){case"cone":var n=E(z(e,0),z(e,-.6),a?20:t),i=Object(j.c)(t,a);r.push({shape:i[0],fill:n}),r.push({shape:i[1],fill:n});break;case"inverted-cone":var c=z(e,0),o=E(c,z(e,-.6),t),u=Object(j.h)(t);r.push({shape:u[0],fill:o}),r.push({shape:u[1],fill:c});break;case"cube":var h=Object(j.d)(t,a);r.push({shape:h[0],fill:z(e,0)}),r.push({shape:h[1],fill:z(e,-.3)}),r.push({shape:h[2],fill:z(e,-.5)});break;case"cylinder":var b=E(z(e,0),z(e,-.6),a?20:t),f=Object(j.e)(t,a);r.push({shape:f[0],fill:b}),r.push({shape:f[1],fill:b}),r.push({shape:f[2],fill:z(e,0)});break;case"diamond":var v=Object(j.f)(t);r.push({shape:v[0],fill:z(e,-.3)}),r.push({shape:v[1],fill:z(e,0)}),r.push({shape:v[2],fill:z(e,-.3)}),r.push({shape:v[3],fill:z(e,-.7)});break;case"sphere":var y=E(z(e,0),z(e,-.6));y.x1=0,y.y1=0,y.x2=.25*t,y.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:y});break;case"tetrahedron":var d=Object(j.j)(t);r.push({shape:d[0],fill:z(e,-.3)}),r.push({shape:d[1],fill:z(e,0)}),r.push({shape:d[2],fill:z(e,-.6)})}}return r}(n,M,L)))}}})),Object(u.j)(i).then((function(e){var a=[];return e.forEach((function(e){e.value?a.push(e.value):e.error&&x.warn("error while building swatchInfo!",e.error)})),Object(O.a)(a,[c,o],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function Z(){return(Z=Object(n.a)(s.a.mark((function e(t,a){var r,n,c,o,u,p,b,m,f,v,y,d,x,P,D,I,E,R,Z,q,A,H,J,N,T,U,F,W,B,G,K;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="mesh-3d"===t.type,n=t.symbolLayers,c=a&&a.size?Object(h.d)(a.size):null,o=a&&a.maxSize?Object(h.d)(a.maxSize):null,u=c||k,p=[],b=0,m=0,f=!1,v=0;case 3:if(!(v<n.length)){e.next=39;break}if(y=n.getItemAt(v),d=[],!r||"fill"===y.type){e.next=7;break}return e.abrupt("continue",36);case 7:x=j.l.fill[0],e.t0=y.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?25:"water"===e.t0?30:35;break;case 11:if(P=w(y),D=Math.min(u,o||g),b=Math.max(b,D),m=Math.max(m,D),f=!0,I=z(y,0),E="pattern"in y&&y.pattern,R=L(y),e.t1=!r&&Object(i.i)(E)&&"style"===E.type&&"solid"!==E.style&&R,!e.t1){e.next=20;break}return e.next=19,S(E,R);case 19:I=e.sent;case 20:return d.push({shape:x,fill:I,stroke:P}),e.abrupt("break",35);case 22:return Z={stroke:C(y,0),shape:x},b=Math.max(b,k),m=Math.max(m,k),d.push(Z),e.abrupt("break",35);case 25:return q=Object(l.a)({join:"round"},C(y,-.4)),A=z(y,0),H=z(y,-.2),J=Math.min(u,o||g),N=Object(j.g)(J),q.width=1,d.push({shape:N[0],fill:H,stroke:q}),d.push({shape:N[1],fill:H,stroke:q}),d.push({shape:N[2],fill:A,stroke:q}),k,T=.7*k+.5*J,b=Math.max(b,22),m=Math.max(m,T),e.abrupt("break",35);case 30:return U=L(y),F=M(U),W=M(U,2),B=M(U,3),G=Object(j.k)(),f=!0,d.push({shape:G[0],fill:F}),d.push({shape:G[1],fill:W}),d.push({shape:G[2],fill:B}),K=Math.min(u,o||g),b=Math.max(b,K),m=Math.max(m,K),e.abrupt("break",35);case 35:p.push(d);case 36:v++,e.next=3;break;case 39:return e.abrupt("return",Promise.resolve(Object(O.a)(p,[b,m],{node:a&&a.node,scale:f,opacity:a&&a.opacity})));case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){if(0===e.symbolLayers.length)return Promise.reject(new o.a("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var a=null;switch(e.type){case"point-3d":a=R(e,t);break;case"line-3d":a=function(e,t){var a,r=e.symbolLayers,s=[],n=Object(d.g)(e),i=t&&t.size?Object(h.d)(t.size):null,c=(t&&t.maxSize?Object(h.d)(t.maxSize):null)||80,o=0,u=0;return r.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var r=[];switch(e.type){case"line":var n=C(e,0),h=n&&n.width||0;0===t&&(a=h);var p=Math.min(i||h,c),b=0===t?p:i?p*(h/a):p,m=b>20?2*b:40;u=Math.max(u,b),o=Math.max(o,m),n.width=b,r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[o,.5*u]}]},stroke:n});break;case"path":var f=Math.min(i||k,c),v=z(e,0),y=z(e,-.2),d=I(e,-.4),O=d?{color:d,width:1}:{};if("quad"===e.profile){var g,x,w=null!=(g=e.width)?g:e.size,M=null!=(x=e.height)?x:e.size,L=Object(j.i)(w&&M?w/M:1,0===M,0===w),S=Object(l.a)(Object(l.a)({},O),{},{join:"bevel"});r.push({shape:L[0],fill:y,stroke:S}),r.push({shape:L[1],fill:y,stroke:S}),r.push({shape:L[2],fill:v,stroke:S})}else r.push({shape:j.l.pathSymbol3DLayer[0],fill:y,stroke:O}),r.push({shape:j.l.pathSymbol3DLayer[1],fill:v,stroke:O});u=Math.max(u,f),o=u}s.push(r)}})),Promise.resolve(Object(O.a)(s,[o,u],{node:t&&t.node,scale:n,opacity:t&&t.opacity}))}(e,t);break;case"polygon-3d":case"mesh-3d":a=function(e,t){return Z.apply(this,arguments)}(e,t)}return a||Promise.reject(new o.a("symbolPreview: swatchInfo3D","symbol not supported."))}}}]);
//# sourceMappingURL=164.e39af635.chunk.js.map