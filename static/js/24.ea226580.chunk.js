(this["webpackJsonpmap-sample"]=this["webpackJsonpmap-sample"]||[]).push([[24],{480:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return r}));var n=i(498);function r(t){var e="";for(var i in t){var n=t[i];if("boolean"==typeof n)n&&(e+="#define ".concat(i,"\n"));else if("number"==typeof n)e+="#define ".concat(i," ").concat(n.toFixed(),"\n");else if("object"==typeof n){var r=n.options,s=0;for(var a in r)e+="#define ".concat(r[a]," ").concat((s++).toFixed(),"\n");e+="#define ".concat(i," ").concat(r[n.value],"\n")}}return e}function s(t,e,i,r){i=i||{},r=r||"";var s="function"==typeof e.shaders?e.shaders(i):e.shaders;return new n.a(t,r+s.vertexShader,r+s.fragmentShader,e.attributes)}},524:function(t,e,i){"use strict";i.d(e,"a",(function(){return L})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return v})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return a}));var n=i(14),r=i(2),s=i(3);function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32774,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function l(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32774,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32774,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:n,opRgb:r,opAlpha:s,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}var o={zNear:0,zFar:1},u={r:!0,g:!0,b:!0,a:!0};function c(t){return S.intern(t)}function h(t){return x.intern(t)}function _(t){return y.intern(t)}function f(t){return A.intern(t)}function d(t){return m.intern(t)}function g(t){return B.intern(t)}function E(t){return I.intern(t)}function b(t){return D.intern(t)}function v(t){return G.intern(t)}var p=function(){function t(e,i){Object(r.a)(this,t),this.makeKey=e,this.makeRef=i,this.interns=new Map}return Object(s.a)(t,[{key:"intern",value:function(t){if(!t)return null;var e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}]),t}();function T(t){return"["+t.join(",")+"]"}var S=new p(F,(function(t){return Object(n.a)({__tag:"Blending"},t)}));function F(t){return t?T([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}var x=new p(O,(function(t){return Object(n.a)({__tag:"Culling"},t)}));function O(t){return t?T([t.face,t.mode]):null}var y=new p(R,(function(t){return Object(n.a)({__tag:"PolygonOffset"},t)}));function R(t){return t?T([t.factor,t.units]):null}var A=new p(C,(function(t){return Object(n.a)({__tag:"DepthTest"},t)}));function C(t){return t?T([t.func]):null}var m=new p(k,(function(t){return Object(n.a)({__tag:"StencilTest"},t)}));function k(t){return t?T([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}var B=new p(M,(function(t){return Object(n.a)({__tag:"DepthWrite"},t)}));function M(t){return t?T([t.zNear,t.zFar]):null}var I=new p(P,(function(t){return Object(n.a)({__tag:"ColorWrite"},t)}));function P(t){return t?T([t.r,t.g,t.b,t.a]):null}var D=new p(W,(function(t){return Object(n.a)({__tag:"StencilWrite"},t)}));function W(t){return t?T([t.mask]):null}var G=new p((function(t){return t?T([F(t.blending),O(t.culling),R(t.polygonOffset),C(t.depthTest),k(t.stencilTest),M(t.depthWrite),P(t.colorWrite),W(t.stencilWrite)]):null}),(function(t){return{blending:c(t.blending),culling:h(t.culling),polygonOffset:_(t.polygonOffset),depthTest:f(t.depthTest),stencilTest:d(t.stencilTest),depthWrite:g(t.depthWrite),colorWrite:E(t.colorWrite),stencilWrite:b(t.stencilWrite)}}));var L=function(){function t(e){Object(r.a)(this,t),this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=e}return Object(s.a)(t,[{key:"setPipeline",value:function(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}},{key:"invalidateBlending",value:function(){this._blendingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateCulling",value:function(){this._cullingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidatePolygonOffset",value:function(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthTest",value:function(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilTest",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthWrite",value:function(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateColorWrite",value:function(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilWrite",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"setBlending",value:function(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}},{key:"setCulling",value:function(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}},{key:"setPolygonOffset",value:function(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}},{key:"setDepthTest",value:function(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}},{key:"setStencilTest",value:function(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}},{key:"setDepthWrite",value:function(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}},{key:"setColorWrite",value:function(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}},{key:"setStencilWrite",value:function(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}},{key:"setSubState",value:function(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}]),t}()},538:function(t,e,i){"use strict";var n=i(2),r=i(3),s=i(480),a=function(){function t(e){Object(n.a)(this,t),this._programCacheByTemplate=new Map,this._rctx=e}return Object(r.a)(t,[{key:"dispose",value:function(){this._programCacheByTemplate.forEach((function(t){t.programs.forEach((function(t){t.dispose()}))})),this._programCacheByTemplate=null}},{key:"getProgram",value:function(t,e){var i=this;return this._programCacheByTemplate.has(t)||this.addProgramTemplate(t,(function(e){return Object(s.a)(i._rctx,t,e)})),this.getProgramTemplateInstance(t,e)}},{key:"addProgramTemplate",value:function(t,e){this._programCacheByTemplate.set(t,{constructor:e,programs:new Map})}},{key:"getProgramTemplateInstance",value:function(t,e){var i=this._programCacheByTemplate.get(t);if(i){var n=e?JSON.stringify(e):"default";if(!i.programs.has(n)){var r=i.constructor(e);i.programs.set(n,r)}return i.programs.get(n)}return null}}]),t}();e.a=a},539:function(t,e,i){"use strict";var n=i(2),r=i(3),s=function(){function t(e){Object(n.a)(this,t),this.readFile=e}return Object(r.a)(t,[{key:"resolveIncludes",value:function(t){return this.resolve(t)}},{key:"resolve",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(i.has(t))return i.get(t);var n=this.read(t);if(!n)throw new Error("cannot find shader file ".concat(t));for(var r=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,s=r.exec(n),a=[];null!=s;)a.push({path:s[1],start:s.index,length:s[0].length}),s=r.exec(n);var l=0,o="";return a.forEach((function(t){o+=n.slice(l,t.start),o+=i.has(t.path)?"":e.resolve(t.path,i),l=t.start+t.length})),o+=n.slice(l),i.set(t,o),o}},{key:"read",value:function(t){return this.readFile(t)}}]),t}();e.a=s},564:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(485),s=function t(e,i,r,s,a,l,o,u){Object(n.a)(this,t),this.createQuery=e,this.resultAvailable=i,this.getResult=r,this.disjoint=s,this.beginTimeElapsed=a,this.endTimeElapsed=l,this.createTimestamp=o,this.timestampBits=u};function a(t,e){if(e.disjointTimerQuery)return null;var i=t.getExtension("EXT_disjoint_timer_query_webgl2");return i&&Object(r.a)(t)?new s((function(){return t.createQuery()}),(function(e){return t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)}),(function(e){return t.getQueryParameter(e,t.QUERY_RESULT)}),(function(){return t.getParameter(i.GPU_DISJOINT_EXT)}),(function(e){return t.beginQuery(i.TIME_ELAPSED_EXT,e)}),(function(){return t.endQuery(i.TIME_ELAPSED_EXT)}),(function(t){return i.queryCounterEXT(t,i.TIMESTAMP_EXT)}),(function(){return t.getQuery(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT)})):(i=t.getExtension("EXT_disjoint_timer_query"))?new s((function(){return i.createQueryEXT()}),(function(t){return i.getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT)}),(function(t){return i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)}),(function(){return t.getParameter(i.GPU_DISJOINT_EXT)}),(function(t){return i.beginQueryEXT(i.TIME_ELAPSED_EXT,t)}),(function(){return i.endQueryEXT(i.TIME_ELAPSED_EXT)}),(function(t){return i.queryCounterEXT(t,i.TIMESTAMP_EXT)}),(function(){return i.getQueryEXT(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT)})):null}},601:function(t,e,i){"use strict";var n=i(2),r=i(3),s=(i(11),i(8)),a=i(524),l=i(485),o=33984,u=function(){function t(){for(Object(n.a)(this,t),this._current=new Array,this._max=new Array,this._allocations=new Map;this._current.length<6;)this._current.push(0),this._max.push(0)}return Object(r.a)(t,[{key:"resetMax",value:function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}},{key:"increment",value:function(t,e){var i=++this._current[t];this._max[t]=Math.max(i,this._max[t])}},{key:"decrement",value:function(t,e){--this._current[t]}},{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}},{key:"printResourceCount",value:function(){if(console.log("Live objects:"),console.log("Textures: ".concat(this._current[0])),console.log("Buffers: ".concat(this._current[1])),console.log("VAOs: ".concat(this._current[2])),console.log("Programs: ".concat(this._current[3])),console.log("Framebuffers: ".concat(this._current[4])),console.log("Renderbuffers: ".concat(this._current[5])),this._allocations.size>0){console.log("".concat(this._allocations.size," live object allocations:"));var t=new Map;this._allocations.forEach((function(e){var i;t.set(e,(null!=(i=t.get(e))?i:0)+1)})),t.forEach((function(t,e){return console.log(t," : ",e)}))}}}]),t}(),c=i(13),h=i(564);function _(t,e){var i,n,r,s,a,o,u,c,_,d,g,E=e&&e.disabledExtensions||{},b=e&&e.debugWebGLExtensions||{},v=null,p=null,T=null,S=null;return{get drawBuffers(){return g||(g=function(t,e){if(e.disjointTimerQuery)return null;if(Object(l.a)(t))return{drawBuffers:t.drawBuffers.bind(t),MAX_DRAW_BUFFERS:t.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:t.MAX_COLOR_ATTACHMENTS};if(e.drawBuffers)return null;var i=t.getExtension("WEBGL_draw_buffers");return i?{drawBuffers:i.drawBuffersWEBGL.bind(i),MAX_DRAW_BUFFERS:i.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:i.MAX_COLOR_ATTACHMENTS_WEBGL}:null}(t,E)),g},get instancing(){return i||(i=function(t){if(Object(l.a)(t))return{drawArraysInstanced:t.drawArraysInstanced.bind(t),drawElementsInstanced:t.drawElementsInstanced.bind(t),vertexAttribDivisor:t.vertexAttribDivisor.bind(t)};var e=t.getExtension("ANGLE_instanced_arrays");return e?{drawArraysInstanced:e.drawArraysInstancedANGLE.bind(e),drawElementsInstanced:e.drawElementsInstancedANGLE.bind(e),vertexAttribDivisor:e.vertexAttribDivisorANGLE.bind(e)}:null}(t)),i},get vao(){return n||(n=function(t,e){if(Object(l.a)(t))return{createVertexArray:t.createVertexArray.bind(t),deleteVertexArray:t.deleteVertexArray.bind(t),bindVertexArray:t.bindVertexArray.bind(t)};if(e.vao)return null;var i=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object");return i?{createVertexArray:i.createVertexArrayOES.bind(i),deleteVertexArray:i.deleteVertexArrayOES.bind(i),bindVertexArray:i.bindVertexArrayOES.bind(i)}:null}(t,E)),n},get compressedTextureETC(){return r||(r=function(t,e){if(e.compressedTextureETC)return null;var i=t.getExtension("WEBGL_compressed_texture_etc");return i?{COMPRESSED_R11_EAC:i.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:i.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:i.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:i.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:i.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:i.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}(t,E)),r},get compressedTextureS3TC(){return s||(s=function(t,e){if(e.compressedTextureS3TC)return null;var i=t.getExtension("WEBGL_compressed_texture_s3tc");return i?{COMPRESSED_RGB_S3TC_DXT1:i.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:i.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:i.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:i.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(t,E)),s},get textureFilterAnisotropic(){return a||(a=function(t,e){if(e.textureFilterAnisotropic)return null;var i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return i?{MAX_TEXTURE_MAX_ANISOTROPY:i.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:i.TEXTURE_MAX_ANISOTROPY_EXT}:null}(t,E)),a},get disjointTimerQuery(){return o||(o=Object(h.a)(t,E)),o},get textureFloat(){return u||(u=function(t,e){if(Object(l.a)(t))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t.HALF_FLOAT};if(t instanceof WebGLRenderingContext){var i=!e.textureHalfFloat&&t.getExtension("OES_texture_half_float");return{textureFloat:!e.textureFloat&&!!t.getExtension("OES_texture_float"),textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!!i,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:i?i.HALF_FLOAT_OES:void 0}}return null}(t,E)),u},get colorBufferFloat(){return c||(c=function(t,e){if(Object(l.a)(t)){var i=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),n=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_float"),r=!e.colorBufferFloat&&t.getExtension("EXT_float_blend");return i||n||r?{textureFloat:!!n,textureHalfFloat:!!i,R16F:t.R16F,RG16F:t.RG16F,RGBA16F:t.RGBA16F,R32F:t.R32F,RG32F:t.RG32F,RGBA32F:t.RGBA32F,R11F_G11F_B10F:t.R11F_G11F_B10F,RGB16F:t.RGB16F}:null}if(t instanceof WebGLRenderingContext){var s=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),a=!e.colorBufferFloat&&t.getExtension("WEBGL_color_buffer_float"),o=!e.colorBufferFloat&&t.getExtension("EXT_float_blend");return s||a||o?{textureFloat:!!a,textureHalfFloat:!!s,RGBA16F:s?s.RGBA16F_EXT:void 0,RGB16F:s?s.RGB16F_EXT:void 0,RGBA32F:a?a.RGBA32F_EXT:void 0}:null}return null}(t,E)),c},get blendMinMax(){return _||(_=function(t,e){if(Object(l.a)(t))return{MIN:t.MIN,MAX:t.MAX};if(e.blendMinMax)return null;var i=t.getExtension("EXT_blend_minmax");return i?{MIN:i.MIN_EXT,MAX:i.MAX_EXT}:null}(t,E)),_},get depthTexture(){return null===v&&(v=f(t,E,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),v},get standardDerivatives(){return null===p&&(p=f(t,E,"standardDerivatives",!0,["OES_standard_derivatives"])),p},get shaderTextureLOD(){return null===T&&(T=f(t,E,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),T},get fragDepth(){return null===S&&(S=f(t,E,"fragDepth",!0,["EXT_frag_depth"])),S},get loseContext(){return d||(d=function(t,e){var i=e.loseContext&&t.getExtension("WEBGL_lose_context");return i?{loseRenderingContext:function(){return i.loseContext()}}:null}(t,b)),d},enable:function(t){return this[t]}}}function f(t,e,i,n,r){if(n&&Object(l.a)(t))return!0;if(e[i])return!1;var s,a=Object(c.a)(r);try{for(a.s();!(s=a.n()).done;){var o=s.value;if(t.getExtension(o))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}var d=function(){function t(e,i){var r=this;Object(n.a)(this,t),this.gl=null,this.instanceCounter=new u,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap=[],this._numOfDrawCalls=0,this._numOfTriangles=0,this.contextVersion=Object(l.a)(e)?"webgl2":"webgl",this.gl=e,e instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint"),this._capabilities=_(e,i);var s=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:s[0],y:s[1],width:s[2],height:s[3]},this._stateTracker=new a.a({setBlending:function(t){if(t){r.setBlendingEnabled(!0),r.setBlendEquationSeparate(t.opRgb,t.opAlpha),r.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);var e=t.color;r.setBlendColor(e.r,e.g,e.b,e.a)}else r.setBlendingEnabled(!1)},setCulling:function(t){t?(r.setFaceCullingEnabled(!0),r.setCullFace(t.face),r.setFrontFace(t.mode)):r.setFaceCullingEnabled(!1)},setPolygonOffset:function(t){t?(r.setPolygonOffsetFillEnabled(!0),r.setPolygonOffset(t.factor,t.units)):r.setPolygonOffsetFillEnabled(!1)},setDepthTest:function(t){t?(r.setDepthTestEnabled(!0),r.setDepthFunction(t.func)):r.setDepthTestEnabled(!1)},setStencilTest:function(t){if(t){r.setStencilTestEnabled(!0);var e=t.function;r.setStencilFunction(e.func,e.ref,e.mask);var i=t.operation;r.setStencilOp(i.fail,i.zFail,i.zPass)}else r.setStencilTestEnabled(!1)},setDepthWrite:function(t){t?(r.setDepthWriteEnabled(!0),r.setDepthRange(t.zNear,t.zFar)):r.setDepthWriteEnabled(!1)},setColorWrite:function(t){t?r.setColorMask(t.r,t.g,t.b,t.a):r.setColorMask(!1,!1,!1,!1)},setStencilWrite:function(t){t?r.setStencilWriteMask(t.mask):r.setStencilWriteMask(0)}}),this.enforceState()}return Object(r.a)(t,[{key:"isWebGL2Context",value:function(){return"webgl2"===this.contextVersion}},{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",get:function(){if(!this._parameters){var t=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:t?this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}},{key:"dispose",value:function(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap=[],this.gl=null,this._capabilities=null}},{key:"setPipelineState",value:function(t){this._stateTracker.setPipeline(t)}},{key:"setBlendingEnabled",value:function(t){this._blendEnabled!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=t,this._stateTracker.invalidateBlending())}},{key:"setBlendColor",value:function(t,e,i,n){t===this._blendColorState.r&&e===this._blendColorState.g&&i===this._blendColorState.b&&n===this._blendColorState.a||(this.gl.blendColor(t,e,i,n),this._blendColorState.r=t,this._blendColorState.g=e,this._blendColorState.b=i,this._blendColorState.a=n,this._stateTracker.invalidateBlending())}},{key:"setBlendFunction",value:function(t,e){t===this._blendFunctionState.srcRGB&&e===this._blendFunctionState.dstRGB||(this.gl.blendFunc(t,e),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=t,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending())}},{key:"setBlendFunctionSeparate",value:function(t,e,i,n){this._blendFunctionState.srcRGB===t&&this._blendFunctionState.srcAlpha===i&&this._blendFunctionState.dstRGB===e&&this._blendFunctionState.dstAlpha===n||(this.gl.blendFuncSeparate(t,e,i,n),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=i,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=n,this._stateTracker.invalidateBlending())}},{key:"setBlendEquation",value:function(t){this._blendEquationState.mode!==t&&(this.gl.blendEquation(t),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}},{key:"setBlendEquationSeparate",value:function(t,e){this._blendEquationState.mode===t&&this._blendEquationState.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}},{key:"setColorMask",value:function(t,e,i,n){this._colorMaskState.r===t&&this._colorMaskState.g===e&&this._colorMaskState.b===i&&this._colorMaskState.a===n||(this.gl.colorMask(t,e,i,n),this._colorMaskState.r=t,this._colorMaskState.g=e,this._colorMaskState.b=i,this._colorMaskState.a=n,this._stateTracker.invalidateColorWrite())}},{key:"setClearColor",value:function(t,e,i,n){this._clearColor.r===t&&this._clearColor.g===e&&this._clearColor.b===i&&this._clearColor.a===n||(this.gl.clearColor(t,e,i,n),this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=i,this._clearColor.a=n)}},{key:"setFaceCullingEnabled",value:function(t){this._polygonCullingEnabled!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=t,this._stateTracker.invalidateCulling())}},{key:"setPolygonOffsetFillEnabled",value:function(t){this._polygonOffsetFillEnabled!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=t,this._stateTracker.invalidatePolygonOffset())}},{key:"setPolygonOffset",value:function(t,e){this._polygonOffset[0]===t&&this._polygonOffset[1]===e||(this._polygonOffset[0]=t,this._polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}},{key:"setCullFace",value:function(t){this._cullFace!==t&&(this.gl.cullFace(t),this._cullFace=t,this._stateTracker.invalidateCulling())}},{key:"setFrontFace",value:function(t){this._frontFace!==t&&(this.gl.frontFace(t),this._frontFace=t,this._stateTracker.invalidateCulling())}},{key:"setScissorTestEnabled",value:function(t){this._scissorTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=t)}},{key:"setScissorRect",value:function(t,e,i,n){this._scissorRect.x===t&&this._scissorRect.y===e&&this._scissorRect.width===i&&this._scissorRect.height===n||(this.gl.scissor(t,e,i,n),this._scissorRect.x=t,this._scissorRect.y=e,this._scissorRect.width=i,this._scissorRect.height=n)}},{key:"setDepthTestEnabled",value:function(t){this._depthTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=t,this._stateTracker.invalidateDepthTest())}},{key:"setClearDepth",value:function(t){this._clearDepth!==t&&(this.gl.clearDepth(t),this._clearDepth=t)}},{key:"setDepthFunction",value:function(t){this._depthFunction!==t&&(this.gl.depthFunc(t),this._depthFunction=t,this._stateTracker.invalidateDepthTest())}},{key:"setDepthWriteEnabled",value:function(t){this._depthWriteEnabled!==t&&(this.gl.depthMask(t),this._depthWriteEnabled=t,this._stateTracker.invalidateDepthWrite())}},{key:"setDepthRange",value:function(t,e){this._depthRange.zNear===t&&this._depthRange.zFar===e||(this.gl.depthRange(t,e),this._depthRange.zNear=t,this._depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}},{key:"setStencilTestEnabled",value:function(t){this._stencilTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=t,this._stateTracker.invalidateStencilTest())}},{key:"setClearStencil",value:function(t){t!==this._clearStencil&&(this.gl.clearStencil(t),this._clearStencil=t)}},{key:"setStencilFunction",value:function(t,e,i){this._stencilFunction.func===t&&this._stencilFunction.ref===e&&this._stencilFunction.mask===i||(this.gl.stencilFunc(t,e,i),this._stencilFunction.face=1032,this._stencilFunction.func=t,this._stencilFunction.ref=e,this._stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}},{key:"setStencilFunctionSeparate",value:function(t,e,i,n){this._stencilFunction.face===t&&this._stencilFunction.func===e&&this._stencilFunction.ref===i&&this._stencilFunction.mask===n||(this.gl.stencilFuncSeparate(t,e,i,n),this._stencilFunction.face=t,this._stencilFunction.func=e,this._stencilFunction.ref=i,this._stencilFunction.mask=n,this._stateTracker.invalidateStencilTest())}},{key:"setStencilWriteMask",value:function(t){this._stencilWriteMask!==t&&(this.gl.stencilMask(t),this._stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}},{key:"setStencilOp",value:function(t,e,i){this._stencilOperation.fail===t&&this._stencilOperation.zFail===e&&this._stencilOperation.zPass===i||(this.gl.stencilOp(t,e,i),this._stencilOperation.face=1032,this._stencilOperation.fail=t,this._stencilOperation.zFail=e,this._stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}},{key:"setStencilOpSeparate",value:function(t,e,i,n){this._stencilOperation.face===t&&this._stencilOperation.fail===e&&this._stencilOperation.zFail===i&&this._stencilOperation.zPass===n||(this.gl.stencilOpSeparate(t,e,i,n),this._stencilOperation.face=t,this._stencilOperation.face=t,this._stencilOperation.fail=e,this._stencilOperation.zFail=i,this._stencilOperation.zPass=n,this._stateTracker.invalidateStencilTest())}},{key:"setActiveTexture",value:function(t){var e=this._activeTextureUnit;return t>=0&&t!==this._activeTextureUnit&&(this.gl.activeTexture(o+t),this._activeTextureUnit=t),e}},{key:"clear",value:function(t){t&&this.gl.clear(t)}},{key:"clearSafe",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;t&&(16384&t&&this.setColorMask(!0,!0,!0,!0),256&t&&this.setDepthWriteEnabled(!0),1024&t&&this.setStencilWriteMask(e),this.gl.clear(t))}},{key:"drawArrays",value:function(t,e,i){this.gl.drawArrays(t,e,i)}},{key:"drawElements",value:function(t,e,i,n){5123!==i?5125===i&&this.gl.drawElements(t,e,i,n):this.gl.drawElements(t,e,i,n)}},{key:"logIno",value:function(){}},{key:"capabilities",get:function(){return this._capabilities}},{key:"setViewport",value:function(t,e,i,n){var r=this._viewport;r.x===t&&r.y===e&&r.width===i&&r.height===n||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))}},{key:"getViewport",value:function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}},{key:"bindProgram",value:function(t){if(!t)return this.gl.useProgram(null),void(this._activeShaderProgram=null);this._activeShaderProgram!==t&&(t.initialize(),this.gl.useProgram(t.glName),this._activeShaderProgram=t)}},{key:"bindTexture",value:function(t,e){(e>=this.parameters.maxTextureImageUnits||e<0)&&console.error("Input texture unit is out of range of available units!");var i=this._textureUnitMap[e];if(this.setActiveTexture(e),null==t||null==t.glName)return null!=i&&this.gl.bindTexture(i.descriptor.target,null),void(this._textureUnitMap[e]=null);i!==t?(this.gl.bindTexture(t.descriptor.target,t.glName),t.applyChanges(),this._textureUnitMap[e]=t):t.applyChanges()}},{key:"unbindTextureAllUnits",value:function(t){for(var e=0;e<this.parameters.maxTextureImageUnits;e++)this._textureUnitMap[e]===t&&this.bindTexture(null,e)}},{key:"bindFramebuffer",value:function(t){if(Object(s.h)(t))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);this._activeFramebuffer!==t&&(t.initializeAndBind(),this._activeFramebuffer=t)}},{key:"bindBuffer",value:function(t){t&&(34962===t.bufferType?this._activeVertexBuffer=g(this.gl,t,t.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=g(this.gl,t,t.bufferType,this._activeIndexBuffer))}},{key:"bindRenderbuffer",value:function(t){var e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._activeRenderbuffer=t)}},{key:"unbindBuffer",value:function(t){34962===t?this._activeVertexBuffer=g(this.gl,null,t,this._activeVertexBuffer):this._activeIndexBuffer=g(this.gl,null,t,this._activeIndexBuffer)}},{key:"bindVAO",value:function(t){t?this._activeVertexArrayObject&&this._activeVertexArrayObject===t||(t.bind(),this._activeVertexArrayObject=t):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)}},{key:"getBoundTexture",value:function(t){return this._textureUnitMap[t]}},{key:"getBoundFramebufferObject",value:function(){return this._activeFramebuffer}},{key:"getBoundVAO",value:function(){return this._activeVertexArrayObject}},{key:"resetState",value:function(){this.bindProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(var t=0;t<this.parameters.maxTextureImageUnits;t++)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}},{key:"enforceState",value:function(){var t=this.gl,e=this.capabilities.vao;e&&e.bindVertexArray(null);for(var i=0;i<this.parameters.maxVertexAttributes;i++)t.disableVertexAttribArray(i);if(this._activeVertexBuffer?t.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):t.bindBuffer(34962,null),this._activeIndexBuffer?t.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):t.bindBuffer(34963,null),e&&this._activeVertexArrayObject){var n=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(n)}t.bindFramebuffer(t.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null),t.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null),t.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),t.bindRenderbuffer(t.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?t.enable(this.gl.BLEND):t.disable(this.gl.BLEND),t.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),t.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),t.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),t.clearDepth(this._clearDepth),t.clearStencil(this._clearStencil),t.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),t.cullFace(this._cullFace),t.depthFunc(this._depthFunction),t.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),t.depthMask(this._depthWriteEnabled),t.frontFace(this._frontFace),t.lineWidth(1),!0===this._polygonCullingEnabled?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),t.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),t.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),t.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),t.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),t.stencilMask(this._stencilWriteMask);for(var r=0;r<this.parameters.maxTextureImageUnits;r++){t.activeTexture(o+r),t.bindTexture(3553,null);var s=this._textureUnitMap[r];s&&t.bindTexture(s.descriptor.target,s.glName)}t.activeTexture(o+this._activeTextureUnit),t.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)}}]),t}();function g(t,e,i,n){return e?n!==e&&t.bindBuffer(i,e.glName):t.bindBuffer(i,null),e}e.a=d},723:function(t,e,i){"use strict";i.r(e);var n=i(257);i.d(e,"createContextOrErrorHTML",(function(){return n.b}));var r=i(498);i.d(e,"Program",(function(){return r.a}));var s=i(443);i.d(e,"BufferObject",(function(){return s.a}));var a=i(405);i.d(e,"Texture",(function(){return a.a}));var l=i(444);i.d(e,"VertexArrayObject",(function(){return l.a}));var o=i(563);i.d(e,"Renderbuffer",(function(){return o.a}));var u=i(396);i.d(e,"FramebufferObject",(function(){return u.a}));var c=i(480);i.d(e,"createProgram",(function(){return c.a})),i.d(e,"glslifyDefineMap",(function(){return c.b}));var h=i(538);i.d(e,"ProgramCache",(function(){return h.a}));var _=i(601);i.d(e,"RenderingContext",(function(){return _.a}));var f=i(539);i.d(e,"ShaderCompiler",(function(){return f.a}))}}]);
//# sourceMappingURL=24.ea226580.chunk.js.map